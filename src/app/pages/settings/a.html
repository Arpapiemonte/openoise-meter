<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Prova invio</title>
</head>

<body>
    <script>
        var dataCalibration = {
            'lat': 'stefano_01',
            'lon': 'aaa1',
            'so_type': 'aaa',
            'so_version': 'aaa',
            'phone_type': 'aaa',
            'freq_max': 'aaa',
            'fre_min': 'aaa',
            'gain': 'aaa',
            'calib_type': 'aaa',
            'user_type': 'aaa',
            'codice_sicurezza': 'AAssEE44ttggVV&rrrr'
        }

        console.log("dataCalibration", dataCalibration)
        console.log('this.dataCalibration: ', JSON.stringify(dataCalibration))

        inviaDati()

        // richiediDati()

        async function inviaDati() {
            console.log("inviaDati")
            try {
                const response = await fetch("https://utility.arpa.piemonte.it/post_opennoise/send_data.php", {
                    method: "POST",
                    origin: "www.meteo3r.it",
                    // mode: 'no-cors',
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: dataCalibration,
                })
                const result = await response;
                console.log("inviaDati result:", result);
            } catch (err) {
                console.log("inviaDati ERRORE", err)
            }
        }

        async function richiediDati() {
            console.log("richiediDati")
            try {
                const response = await fetch("https://utility.arpa.piemonte.it/post_opennoise/visualizza.php")
                const result = await response;
                console.log("richiediDati result:", result);
            } catch (err) {
                console.log("richiediDati ERRORE", err)
            }
        }
    </script>
</body>

</html>